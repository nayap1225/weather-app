<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë‚ ì”¨ ì•± ì¢…í•© ë°°ê²½ ì‹œë®¬ë ˆì´í„° (Pro)</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <style>
      @font-face {
        font-family: "Binggrae";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Binggrae.woff") format("woff");
      }
      body {
        font-family: "Binggrae", sans-serif;
        overflow-x: hidden;
      }

      /* Animations */
      @keyframes snow {
        0% {
          transform: translateY(-10px) translateX(0);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) translateX(20px);
          opacity: 0.3;
        }
      }
      @keyframes rain-drop {
        0% {
          transform: translateY(-20px);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        90% {
          opacity: 0.4;
        }
        100% {
          transform: translateY(110vh);
          opacity: 0;
        }
      }
      @keyframes thunder-flash {
        0%,
        100% {
          opacity: 0;
        }
        10%,
        90% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.5;
        }
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      .snow-particle {
        position: absolute;
        background: white;
        border-radius: 50%;
        pointer-events: none;
        animation: snow infinite linear;
      }
      .rain-drop {
        position: absolute;
        background: #e0f2fe;
        border-radius: 999px;
        pointer-events: none;
        animation: rain-drop infinite linear;
      }
      .thunder-layer {
        position: absolute;
        inset: 0;
        background: white;
        pointer-events: none;
        z-index: 20;
        animation: thunder-flash 0.2s ease-out;
      }
      /* Summary Styles */
      .card-shadow {
        box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body class="bg-slate-50 min-h-screen p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
      <header class="text-center mb-12">
        <h1 class="text-4xl font-black text-slate-800 mb-4">ğŸŒªï¸ í™˜ê²½ ì—”ì§„ ì‹œë®¬ë ˆì´í„° (Pro)</h1>
        <p class="text-slate-500">ë°”ëŒì˜ ë°©í–¥, ì„¸ê¸°, ë²ˆê°œ íš¨ê³¼ê¹Œì§€ ê²°í•©ëœ ìµœì²¨ë‹¨ ë‚ ì”¨ ì—”ì§„ì„ í™•ì¸í•˜ì„¸ìš”.</p>
      </header>

      <section class="bg-white rounded-[2rem] shadow-2xl p-8 mb-16 border border-slate-200">
        <div class="grid grid-cols-1 xl:grid-cols-12 gap-10">
          <!-- Controls -->
          <div class="xl:col-span-4 space-y-6">
            <!-- Basic Controls -->
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-xs font-bold text-slate-500 mb-2 uppercase">ğŸ•’ ì‹œê°„ëŒ€</label>
                <select id="timeSelect" class="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg outline-none text-sm">
                  <option value="night">ë°¤</option>
                  <option value="dawn">ìƒˆë²½</option>
                  <option value="morning">ì•„ì¹¨</option>
                  <option value="noon" selected>ì •ì˜¤</option>
                  <option value="afternoon">ì˜¤í›„</option>
                  <option value="sunset">ë…¸ì„</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-bold text-slate-500 mb-2 uppercase">â˜ï¸ ë‚ ì”¨</label>
                <select id="weatherSelect" class="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg outline-none text-sm">
                  <option value="clear">ë§‘ìŒ</option>
                  <option value="clouds">êµ¬ë¦„</option>
                  <option value="rain">ë¹„</option>
                  <option value="snow">ëˆˆ</option>
                  <option value="fog">ì•ˆê°œ</option>
                </select>
              </div>
            </div>

            <!-- New: Scenario Presets -->
            <div class="p-4 bg-slate-800 rounded-2xl border border-slate-700 space-y-3 shadow-lg">
              <h3 class="text-sm font-bold text-slate-100 flex items-center gap-2"><span>ğŸ¬</span> ì‹œë‚˜ë¦¬ì˜¤ í”„ë¦¬ì…‹ (Presets)</h3>
              <div class="grid grid-cols-2 gap-2">
                <button onclick="applyPreset('dustStorm')" class="p-2 text-[11px] font-bold bg-slate-700 hover:bg-slate-600 text-amber-400 rounded-xl transition-all border border-amber-900/30">
                  ğŸŒªï¸ í™©ì‚¬/ë§¤ìš°ë‚˜ì¨
                </button>
                <button onclick="applyPreset('heatwave')" class="p-2 text-[11px] font-bold bg-slate-700 hover:bg-slate-600 text-red-400 rounded-xl transition-all border border-red-900/30">
                  ğŸ”¥ ë‚´ì¼ í­ì—¼
                </button>
                <button onclick="applyPreset('coldSnap')" class="p-2 text-[11px] font-bold bg-slate-700 hover:bg-slate-600 text-blue-400 rounded-xl transition-all border border-blue-900/30">
                  ğŸ¥¶ ì–´ì œë³´ë‹¤ ì¶”ì›€
                </button>
                <button onclick="applyPreset('perfectDay')" class="p-2 text-[11px] font-bold bg-slate-700 hover:bg-slate-600 text-green-400 rounded-xl transition-all border border-green-900/30">
                  ğŸŒ¿ ì¾Œì í•œ ë‚ ì”¨
                </button>
              </div>
            </div>

            <!-- Wind Controls -->
            <div class="p-4 bg-blue-50 rounded-2xl border border-blue-100 space-y-4">
              <h3 class="text-sm font-bold text-blue-800 flex items-center gap-2"><span>ğŸŒªï¸</span> ë°”ëŒ ì„¤ì • (Wind)</h3>
              <div>
                <div class="flex justify-between text-xs mb-2">
                  <span class="text-blue-700">í’ì† (WSD)</span>
                  <span id="wsdVal" class="font-bold text-blue-900">0 m/s</span>
                </div>
                <input type="range" id="wsdRange" min="0" max="20" step="0.5" value="0" class="w-full h-1.5 bg-blue-200 rounded-lg appearance-none cursor-pointer accent-blue-600" />
              </div>
              <div>
                <div class="flex justify-between text-xs mb-2">
                  <span class="text-blue-700">í’í–¥ (VEC)</span>
                  <span id="vecVal" class="font-bold text-blue-900">ë¶í’ (180Â°)</span>
                </div>
                <input type="range" id="vecRange" min="0" max="360" step="10" value="180" class="w-full h-1.5 bg-blue-200 rounded-lg appearance-none cursor-pointer accent-blue-600" />
              </div>
            </div>

            <!-- Intensity & Thunder -->
            <div class="p-4 bg-purple-50 rounded-2xl border border-purple-100 space-y-4">
              <h3 class="text-sm font-bold text-purple-800 flex items-center gap-2"><span>âš¡</span> íŠ¹ìˆ˜ íš¨ê³¼ (Intensity & Thunder)</h3>
              <div>
                <div class="flex justify-between text-xs mb-2">
                  <span class="text-purple-700">ê°•ìˆ˜ ê°•ë„ (RN1)</span>
                  <span id="rn1Val" class="font-bold text-purple-900">0 mm</span>
                </div>
                <input type="range" id="rn1Range" min="0" max="50" step="1" value="0" class="w-full h-1.5 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-600" />
              </div>
              <div class="flex items-center justify-between">
                <span class="text-xs font-bold text-purple-700">ì²œë‘¥ë²ˆê°œ í™œì„±í™”</span>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="thunderToggle" class="sr-only peer" />
                  <div
                    class="w-11 h-6 bg-purple-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"
                  ></div>
                </label>
              </div>
            </div>

            <!-- Dust -->
            <div class="p-4 bg-slate-50 rounded-2xl border border-slate-200 space-y-4">
              <h3 class="text-sm font-bold text-slate-700 flex items-center gap-2"><span>ğŸ˜·</span> ë¯¸ì„¸ë¨¼ì§€ ì„¤ì • (Dust)</h3>

              <div class="space-y-3">
                <div id="pm10Box" class="p-2 rounded-xl transition-colors">
                  <div class="flex justify-between text-xs mb-1">
                    <span class="text-slate-500 font-bold">PM10 (ì¼ë°˜)</span>
                    <span id="pm10GradeLabel" class="font-bold text-blue-600">ì¢‹ìŒ</span>
                  </div>
                  <input type="range" id="pm10Range" min="1" max="4" value="1" class="w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-600" />
                </div>

                <div id="pm25Box" class="pt-1 border-t border-slate-200/50 p-2 rounded-xl transition-colors">
                  <div class="flex justify-between text-xs mb-1">
                    <span class="text-slate-500 font-bold">PM2.5 (ì´ˆë¯¸ì„¸)</span>
                    <span id="pm25GradeLabel" class="font-bold text-blue-600">ì¢‹ìŒ</span>
                  </div>
                  <input type="range" id="pm25Range" min="1" max="4" value="1" class="w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-600" />
                </div>
              </div>
            </div>

            <!-- Temp Comparison Controls -->
            <div class="p-4 bg-orange-50 rounded-2xl border border-orange-100 space-y-4">
              <h3 class="text-sm font-bold text-orange-800 flex items-center gap-2"><span>ğŸŒ¡ï¸</span> ê¸°ì˜¨ ë¹„êµ ì„¤ì • (Comparison)</h3>

              <!-- Yesterday -->
              <div>
                <div class="flex justify-between text-xs mb-2">
                  <span class="text-orange-700">ì–´ì œ ê¸°ì˜¨ ì°¨</span>
                  <span id="yTempDiffVal" class="font-bold text-orange-900">0Â°C</span>
                </div>
                <input type="range" id="yTempDiffRange" min="-10" max="10" step="0.5" value="0" class="w-full h-1.5 bg-orange-200 rounded-lg appearance-none cursor-pointer accent-orange-600 mb-2" />

                <div class="flex justify-between text-xs mb-2">
                  <span class="text-orange-700">ì–´ì œ ì²´ê° ì°¨</span>
                  <span id="yFeelsDiffVal" class="font-bold text-orange-900">0Â°C</span>
                </div>
                <input type="range" id="yFeelsDiffRange" min="-10" max="10" step="0.5" value="0" class="w-full h-1.5 bg-orange-200 rounded-lg appearance-none cursor-pointer accent-orange-600" />
              </div>

              <!-- Tomorrow -->
              <div>
                <div class="flex justify-between text-xs mb-2">
                  <span class="text-orange-700">ë‚´ì¼ ê¸°ì˜¨ ì°¨</span>
                  <span id="tTempDiffVal" class="font-bold text-orange-900">0Â°C</span>
                </div>
                <input type="range" id="tTempDiffRange" min="-10" max="10" step="0.5" value="0" class="w-full h-1.5 bg-orange-200 rounded-lg appearance-none cursor-pointer accent-orange-600 mb-2" />

                <div class="flex justify-between text-xs mb-2">
                  <span class="text-orange-700">ë‚´ì¼ ì²´ê° ì°¨</span>
                  <span id="tFeelsDiffVal" class="font-bold text-orange-900">0Â°C</span>
                </div>
                <input type="range" id="tFeelsDiffRange" min="-10" max="10" step="0.5" value="0" class="w-full h-1.5 bg-orange-200 rounded-lg appearance-none cursor-pointer accent-orange-600" />
              </div>
            </div>

            <!-- Text Color Controller -->
            <div class="pt-4 border-t border-slate-100">
              <label class="block text-xs font-bold text-slate-500 mb-2 uppercase">ğŸ”  í…ìŠ¤íŠ¸ ì»¬ëŸ¬ (ê°•ì œ ì„¤ì •)</label>
              <div class="flex gap-2">
                <button onclick="setTextColor('auto')" class="text-btn flex-1 p-2 text-xs rounded-lg border border-blue-600 bg-blue-600 text-white" data-color="auto">ìë™ (Auto)</button>
                <button onclick="setTextColor('white')" class="text-btn flex-1 p-2 text-xs rounded-lg border border-slate-200 bg-white text-slate-700" data-color="white">í™”ì´íŠ¸</button>
                <button onclick="setTextColor('dark')" class="text-btn flex-1 p-2 text-xs rounded-lg border border-slate-200 bg-white text-slate-700" data-color="dark">ë‹¤í¬</button>
              </div>
              <div class="mt-2 flex items-center gap-2">
                <input type="color" id="customColor" oninput="setTextColor('custom')" class="w-8 h-8 rounded border border-slate-200 cursor-pointer" />
                <input type="text" id="customHex" placeholder="#FFFFFF" oninput="handleHexInput(this.value)" class="flex-1 p-2 text-xs rounded-lg border border-slate-200 bg-white outline-none" />
              </div>
            </div>
          </div>

          <!-- Preview Area -->
          <div class="xl:col-span-8">
            <div
              id="simPreview"
              class="relative group aspect-[16/9] xl:h-[600px] rounded-[2rem] overflow-hidden shadow-2xl flex flex-col items-center justify-center transition-all duration-1000 bg-slate-900"
            >
              <div id="simBase" class="absolute inset-0 transition-all duration-1000"></div>
              <div id="simHaze" class="absolute inset-0 pointer-events-none transition-all duration-1000"></div>
              <div id="simOverlay" class="absolute inset-0 transition-all duration-1000"></div>
              <div id="simThunder" class="absolute inset-0 pointer-events-none z-20"></div>
              <div id="simParticles" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

              <!-- Mascot -->
              <div id="mascot" class="relative z-10 w-32 h-32 animate-[float_4s_ease-in-out_infinite] transition-transform duration-500">
                <img src="/gurumi_192x192.png" class="w-full h-full object-contain filter drop-shadow-2xl" alt="Mascot" />
              </div>

              <!-- Preview Mockup Container -->
              <div id="previewMockup" class="w-full max-w-sm mx-auto p-8 rounded-3xl backdrop-blur-md bg-white/10 border border-white/20 z-10 mt-6 shadow-2xl transition-all duration-500">
                <!-- WeatherNowCard Mockup Area -->
                <div id="nowCardMockup" class="w-full text-left bg-transparent mb-6">
                  <div class="mb-4">
                    <p id="moodText" class="text-lg font-bold leading-relaxed opacity-90 break-keep">í¬ê·¼í•œ êµ¬ë¦„ ì•„ë˜ ì ì‹œ ì‰¬ì–´ê°€ê¸° ì¢‹ì€ ë‚ ì´ì—ìš” â˜ï¸ğŸ’ª</p>
                  </div>
                  <div class="flex items-end gap-2">
                    <h2 id="sampleTemp" class="text-6xl font-black tracking-tighter drop-shadow-lg flex items-center">
                      24.5Â° <span id="sampleIcon" class="text-4xl ml-2 filter drop-shadow-md">â˜€ï¸</span>
                    </h2>
                    <span id="sampleFeelsLike" class="text-xl text-blue-100 mb-2 font-medium opacity-90">ì²´ê° 26Â°</span>
                  </div>
                </div>

                <!-- Items Area -->
                <div id="itemArea" class="w-full mb-6 space-y-2">
                  <div id="noItem" class="text-xs text-white/50 text-center py-2 border border-white/10 rounded-xl">ì¤€ë¹„ë¬¼ ì—†ìŒ</div>
                  <div id="maskItem" class="hidden p-3 bg-white/20 rounded-xl flex items-center gap-3 backdrop-blur-md border border-white/20">
                    <span class="text-2xl">ğŸ˜·</span>
                    <div>
                      <div class="text-[10px] font-bold text-white/80 uppercase">ë¯¸ì„¸ë¨¼ì§€</div>
                      <div id="maskReason" class="text-xs font-bold text-white">ë†ë„ ë‚˜ì¨</div>
                    </div>
                  </div>
                </div>

                <!-- Comparison Messages -->
                <div id="comparisonArea" class="w-full space-y-2 p-4 rounded-2xl bg-black/10 border border-white/5 backdrop-blur-sm shadow-inner text-left mb-6">
                  <div id="yMsgRow" class="flex items-center gap-2">
                    <span class="text-xs">ğŸ“…</span>
                    <p id="yMsg" class="text-[11px] font-bold opacity-90">ì–´ì œë³´ë‹¤ ê¸°ì˜¨ì€ ê°™ê³ , ì²´ê°ì˜¨ë„ëŠ” ê°™ì•„ìš”</p>
                  </div>
                  <div id="tMsgRow" class="flex items-center gap-2">
                    <span class="text-xs">ğŸ”®</span>
                    <p id="tMsg" class="text-[11px] font-bold opacity-90">ë‚´ì¼ì€ ì˜¤ëŠ˜ë³´ë‹¤ ê¸°ì˜¨ì€ ê°™ê³ , ì²´ê°ì˜¨ë„ëŠ” ê°™ì•„ìš”</p>
                  </div>
                </div>

                <!-- WeatherDetailCard Mockup Area -->
                <div id="detailCard" class="w-full grid grid-cols-2 gap-3 transition-all duration-500">
                  <div class="bg-white/10 p-4 rounded-2xl border border-white/5 flex flex-col gap-1 shadow-sm">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-blue-200/80">ğŸ’§</span>
                      <span class="text-[11px] font-bold text-blue-100/60 uppercase">ìŠµë„</span>
                    </div>
                    <span id="detailHumidity" class="text-lg font-black text-white">45%</span>
                  </div>
                  <div class="bg-white/10 p-4 rounded-2xl border border-white/5 flex flex-col gap-1 shadow-sm">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-blue-200/80">â˜”</span>
                      <span class="text-[11px] font-bold text-blue-100/60 uppercase">ê°•ìˆ˜í™•ë¥ </span>
                    </div>
                    <span id="detailPop" class="text-lg font-black text-white">0%</span>
                  </div>
                  <div class="bg-white/10 p-4 rounded-2xl border border-white/5 flex flex-col gap-1 shadow-sm">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-blue-200/80">â˜€ï¸</span>
                      <span class="text-[11px] font-bold text-blue-100/60 uppercase">ìì™¸ì„ </span>
                    </div>
                    <span id="detailUV" class="text-lg font-black text-green-300">ë‚®ìŒ</span>
                  </div>
                  <div class="bg-white/10 p-4 rounded-2xl border border-white/5 flex flex-col gap-1 shadow-sm">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-blue-200/80">ğŸŒ¬ï¸</span>
                      <span class="text-[11px] font-bold text-blue-100/60 uppercase">í’ì†</span>
                    </div>
                    <div class="flex items-baseline gap-1">
                      <span id="detailWind" class="text-lg font-black text-white">0m/s</span>
                      <span id="detailWindDir" class="text-[10px] text-blue-100/40">ë¶í’</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Status Badge -->
              <div class="absolute top-6 left-6 bg-black/40 backdrop-blur-md px-4 py-2 rounded-xl text-white text-[10px] font-bold uppercase tracking-widest">Live Environment Engine v3.0</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Technical Explanation -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-20">
        <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm">
          <div class="text-2xl mb-3">ğŸŒ¬ï¸</div>
          <h4 class="font-bold text-slate-800 mb-2">Wind Physics</h4>
          <p class="text-xs text-slate-500 leading-relaxed">í’ì†ì— ë”°ë¼ ì…ìì˜ ì†ë„ê°€ ë™ì ìœ¼ë¡œ ë³€í•˜ë©°, í’í–¥(VEC)ì— ë§ì¶° ì…ìê°€ ê¸°ìš¸ì–´ì§€ëŠ” skewX íš¨ê³¼ê°€ ì ìš©ë©ë‹ˆë‹¤.</p>
        </div>
        <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm">
          <div class="text-2xl mb-3">âš¡</div>
          <h4 class="font-bold text-slate-800 mb-2">Thunder Logic</h4>
          <p class="text-xs text-slate-500 leading-relaxed">ë²ˆê°œ í™œì„± ì‹œ ë¶ˆê·œì¹™í•œ ê°„ê²©ìœ¼ë¡œ í™”ë©´ì´ ë²ˆì©ì´ëŠ” í”Œë˜ì‹œ ë ˆì´ì–´ê°€ ì‘ë™í•˜ì—¬ í­ìš° ìƒí™©ì˜ ê¸´ì¥ê°ì„ ë”í•©ë‹ˆë‹¤.</p>
        </div>
        <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm">
          <div class="text-2xl mb-3">ğŸŒŠ</div>
          <h4 class="font-bold text-slate-800 mb-2">Precipitation Scaling</h4>
          <p class="text-xs text-slate-500 leading-relaxed">ê°•ìˆ˜ëŸ‰(RN1) ë°ì´í„°ì— ë”°ë¼ í™”ë©´ì— ë¿Œë ¤ì§€ëŠ” ì…ìì˜ ë°€ë„ë¥¼ ìµœì í™”í•˜ì—¬ ë³´ìŠ¬ë¹„ë¶€í„° í­ìš°ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- NEW SECTION: Options Summary -->
    <!-- ============================================== -->
    <div id="summary-section" class="mt-24 pt-12 border-t-4 border-slate-200">
      <header class="mb-12 text-center">
        <h1 class="text-3xl md:text-4xl font-black mb-3 text-slate-900">ğŸŒ¦ï¸ ì¢…í•© ë¡œì§ í”„ë¦¬ë·° (Options Summary)</h1>
        <p class="text-slate-500">ì •ì˜ëœ ëª¨ë“  ì˜·ì°¨ë¦¼(Outfit) ë° ì¤€ë¹„ë¬¼(Item) ì¼€ì´ìŠ¤ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.</p>
      </header>

      <!-- 1. Outfit Cases -->
      <section class="mb-16">
        <div class="flex items-center gap-3 mb-6 border-b border-slate-200 pb-4">
          <span class="text-2xl">ğŸ‘•</span>
          <h2 class="text-2xl font-bold">1. ì˜·ì°¨ë¦¼ ì¶”ì²œ (Outfit Cases)</h2>
          <span class="text-xs font-medium px-2 py-1 bg-slate-100 rounded-full text-slate-500">ìš°ì„ ìˆœìœ„: íŠ¹ìˆ˜ > ë³´ì • > ê¸°ì˜¨</span>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-12" id="previewOutfitContainer"></div>
      </section>

      <!-- 2. Item Cases -->
      <section class="mb-16">
        <div class="flex items-center gap-3 mb-6 border-b border-slate-200 pb-4">
          <span class="text-2xl">ğŸ’</span>
          <h2 class="text-2xl font-bold">2. ì¤€ë¹„ë¬¼ (Preparation Items)</h2>
          <span class="text-xs font-medium px-2 py-1 bg-slate-100 rounded-full text-slate-500">í•„ìˆ˜(MUST) vs ì˜µì…˜(OPTION)</span>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="previewItemContainer"></div>
      </section>

      <!-- 3. Mood Cases -->
      <section class="mb-20">
        <div class="flex items-center gap-3 mb-6 border-b border-slate-200 pb-4">
          <span class="text-2xl">ğŸ’¬</span>
          <h2 class="text-2xl font-bold">3. ê°ì„± ë¬¸êµ¬ (Mood Messages)</h2>
        </div>
        <div class="bg-white rounded-2xl p-6 border border-slate-100 card-shadow">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm" id="previewMoodContainer"></div>
        </div>
      </section>
    </div>

    <script>
      const themes = {
        night: "bg-gradient-to-b from-slate-950 via-indigo-950 to-black",
        dawn: "bg-gradient-to-b from-blue-300 via-pink-200 to-orange-100",
        morning: "bg-gradient-to-b from-sky-300 via-blue-100 to-white",
        noon: "bg-gradient-to-b from-sky-400 via-blue-200 to-sky-100",
        afternoon: "bg-gradient-to-b from-sky-200 via-indigo-100 to-orange-50",
        sunset: "bg-gradient-to-b from-orange-400 via-pink-400 to-indigo-900",
      };

      const moodMessages = {
        clear: ["ëˆˆë¶€ì‹  í–‡ì‚´ë§Œí¼ ë‹¹ì‹ ì˜ ì˜¤ëŠ˜ì´ ë°˜ì§ì´ê¸¸ âœ¨ğŸŒ", "í•˜ëŠ˜ê¹Œì§€ ì‘ì›í•´ì£¼ëŠ” í•˜ë£¨ì˜ˆìš” ğŸŒˆ", "ê´œíˆ ê¸°ë¶„ ì¢‹ì•„ì§€ëŠ” í•˜ëŠ˜ì´ì—ìš” â˜€ï¸"],
        rain: ["í† ë‹¥í† ë‹¥ ë¹—ì†Œë¦¬ì— ë§ˆìŒê¹Œì§€ ì°¨ë¶„í•´ì§€ë„¤ìš” ğŸŒ§ï¸â˜•", "ìš°ì‚° ì† ì‘ì€ ì‰¼í‘œ ê°™ì€ í•˜ë£¨ì˜ˆìš” â˜‚ï¸", "ì‚´ì§ ëŠë ¤ì ¸ë„ ê´œì°®ì€, ë¹„ ì˜¤ëŠ” í•˜ë£¨ì˜ˆìš” ğŸŒ¦ï¸"],
        snow: ["í•˜ì–€ ëˆˆì²˜ëŸ¼ ì„¤ë ˆëŠ” ì¼ì´ ìƒê¸¸ ê²ƒ ê°™ì•„ìš” â„ï¸âœ¨", "ì„¸ìƒì´ ì¡°ìš©í•´ì§€ëŠ” ëˆˆ ì˜¤ëŠ” ë‚ ì˜ ë§ˆë²• â›„", "ë°œìêµ­ ì†Œë¦¬ë§ˆì € ë¶€ë“œëŸ¬ìš´ í•˜ë£¨ì˜ˆìš” â„ï¸"],
        dust: ["ë§ˆìŒë§Œì€ ëˆ„êµ¬ë³´ë‹¤ ë§‘ê³  í™”ì°½í•œ í•˜ë£¨ ë˜ì„¸ìš” ğŸŒ¿", "ì˜¤ëŠ˜ì€ ë°–ë³´ë‹¤ ë‚˜ë¥¼ ë¨¼ì € ì±™ê¸°ëŠ” ë‚ ì´ì—ìš” ğŸ˜·", "ì²œì²œíˆ ìˆ¨ ì‰¬ê³ , ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš” ğŸƒ"],
        default: ["í¬ê·¼í•œ êµ¬ë¦„ ì•„ë˜ ì ì‹œ ì‰¬ì–´ê°€ê¸° ì¢‹ì€ ë‚ ì´ì—ìš” â˜ï¸ğŸ’ª", "ì²œì²œíˆ ê°€ë„ ê´œì°®ì€ í•˜ë£¨ì˜ˆìš” ğŸŒ«ï¸", "ê´œíˆ ë©í•˜ë‹ˆ í•˜ëŠ˜ ë³´ê²Œ ë˜ëŠ” ë‚ ì´ì—ìš” â˜ï¸"],
      };

      const weatherOverlays = {
        clear: { color: "bg-transparent", opacity: 0 },
        clouds: { color: "bg-slate-500", opacity: 0.3 },
        rain: { color: "bg-blue-900", opacity: 0.4 },
        snow: { color: "bg-white", opacity: 0.4 },
        fog: { color: "bg-white", opacity: 0.3, haze: 0.5, blur: 8 },
      };

      let currentSettings = {
        time: "noon",
        weather: "clear",
        pm10: 1,
        pm25: 1,
        wsd: 0,
        vec: 180,
        rn1: 0,
        thunder: false,
        textColorOverride: "auto",
        yTempDiff: 0,
        yFeelsDiff: 0,
        tTempDiff: 0,
        tFeelsDiff: 0,
      };

      const dustGrades = {
        1: { label: "ì¢‹ìŒ", color: "text-blue-600", bg: "bg-blue-500/20" },
        2: { label: "ë³´í†µ", color: "text-green-600", bg: "bg-green-500/20" },
        3: { label: "ë‚˜ì¨", color: "text-orange-600", bg: "bg-orange-500/20" },
        4: { label: "ë§¤ìš° ë‚˜ì¨", color: "text-red-600", bg: "bg-red-500/20" },
      };

      let thunderTimer;

      function getCompInfo(val) {
        const absDiff = Math.abs(val);
        const status = val > 0 ? "ë†’ê³ " : val < 0 ? "ë‚®ê³ " : "ê°™ê³ ";
        const suffix = val === 0 ? "ê°™ì•„ìš”" : val > 0 ? "ë†’ì•„ìš”" : "ë‚®ì•„ìš”";
        const colorClass = val > 0 ? "text-red-300 font-black" : val < 0 ? "text-blue-300 font-black" : "text-white/90 font-bold";

        return { diff: absDiff, status, suffix, colorClass };
      }

      function updateSimulator() {
        const preview = document.getElementById("simPreview");
        const base = document.getElementById("simBase");
        const overlay = document.getElementById("simOverlay");
        const haze = document.getElementById("simHaze");
        const particles = document.getElementById("simParticles");
        const mascot = document.getElementById("mascot");

        // UI Labels
        const d10 = dustGrades[currentSettings.pm10];
        const d25 = dustGrades[currentSettings.pm25];

        // Assuming these elements exist or will be added elsewhere in the HTML
        // document.getElementById("pm10GradeLabel").textContent = d10.label;
        // document.getElementById("pm10GradeLabel").className = `font-bold ${d10.color}`;
        // document.getElementById("pm25GradeLabel").textContent = d25.label;
        // document.getElementById("pm25GradeLabel").className = `font-bold ${d25.color}`;

        // Assuming these elements exist or will be added elsewhere in the HTML
        // document.getElementById("yTempDiffVal").textContent = (currentSettings.yTempDiff > 0 ? "+" : "") + currentSettings.yTempDiff + "Â°C";
        // document.getElementById("yFeelsDiffVal").textContent = (currentSettings.yFeelsDiff > 0 ? "+" : "") + currentSettings.yFeelsDiff + "Â°C";
        // document.getElementById("tTempDiffVal").textContent = (currentSettings.tTempDiff > 0 ? "+" : "") + currentSettings.tTempDiff + "Â°C";
        // document.getElementById("tFeelsDiffVal").textContent = (currentSettings.tFeelsDiff > 0 ? "+" : "") + currentSettings.tFeelsDiff + "Â°C";

        // Sample App UI Updates (Yesterday)
        const yT = getCompInfo(currentSettings.yTempDiff);
        const yF = getCompInfo(currentSettings.yFeelsDiff);
        document.getElementById("yMsg").innerHTML =
          `ì–´ì œë³´ë‹¤ ê¸°ì˜¨ì€ <span class="${yT.colorClass}">${yT.diff}ë„ ${yT.status}</span>, ì²´ê°ì€ <span class="${yF.colorClass}">${yF.diff}ë„ ${yF.suffix}</span>`;

        // Sample App UI Updates (Tomorrow)
        const tT = getCompInfo(currentSettings.tTempDiff);
        const tF = getCompInfo(currentSettings.tFeelsDiff);
        document.getElementById("tMsg").innerHTML =
          `ë‚´ì¼ì€ ì˜¤ëŠ˜ë³´ë‹¤ ê¸°ì˜¨ì€ <span class="${tT.colorClass}">${tT.diff}ë„ ${tT.status}</span>, ì²´ê°ì€ <span class="${tF.colorClass}">${tF.diff}ë„ ${tF.suffix}</span>`;

        // Sample App Dust Summary
        // Sample App Dust Summary
        document.getElementById("pm10GradeLabel").textContent = d10.label;
        document.getElementById("pm10Box").className = `p-3 rounded-xl border border-white/10 ${d10.bg}`;
        document.getElementById("pm25GradeLabel").textContent = d25.label;
        document.getElementById("pm25Box").className = `p-3 rounded-xl border border-white/10 ${d25.bg}`;

        // Update Sample Items (Logic Ported from App)
        const maskItem = document.getElementById("maskItem");
        const noItem = document.getElementById("noItem");
        const maskReason = document.getElementById("maskReason");
        const itemArea = document.getElementById("itemArea");

        // ì•„ì´í…œ ì´ˆê¸°í™” (ê¸°ì¡´ items ì œê±°)
        const extraItems = itemArea.querySelectorAll(".extra-item");
        extraItems.forEach((el) => el.remove());

        let hasRequired = false;

        // 1. ë§ˆìŠ¤í¬ (ë¯¸ì„¸ë¨¼ì§€)
        if (currentSettings.pm10 >= 3 || currentSettings.pm25 >= 3) {
          maskItem.classList.remove("hidden");
          hasRequired = true;
          maskReason.textContent = currentSettings.pm25 >= 3 ? "ì´ˆë¯¸ì„¸ë¨¼ì§€ ë†ë„ê°€ ë†’ì•„ìš”" : "ë¯¸ì„¸ë¨¼ì§€ ë†ë„ê°€ ë†’ì•„ìš”";
        } else {
          maskItem.classList.add("hidden");
        }

        // 2. ìš°ì‚° (ë¹„)
        if (currentSettings.weather === "rain" || currentSettings.rn1 > 0) {
          hasRequired = true;
          const umbrella = document.createElement("div");
          umbrella.className = "extra-item p-4 rounded-xl bg-white border-2 border-blue-200 shadow-sm flex flex-col items-start gap-1 mt-2";
          umbrella.innerHTML = `
            <div class="flex justify-between w-full">
              <span class="text-2xl">â˜”</span>
              <span class="text-[10px] font-bold text-blue-500 bg-blue-100 px-1.5 py-0.5 rounded">í•„ìˆ˜</span>
            </div>
            <span class="font-bold text-slate-800">ìš°ì‚°</span>
            <span class="text-[10px] text-blue-600 font-medium">ë¹„ê°€ ë‚´ë¦¬ê³  ìˆì–´ìš”</span>
          `;
          itemArea.appendChild(umbrella);
        }

        // 3. ëˆˆ ê´€ë ¨
        if (currentSettings.weather === "snow") {
          hasRequired = true;
          const snowGear = document.createElement("div");
          snowGear.className = "extra-item p-4 rounded-xl bg-white border-2 border-slate-200 shadow-sm flex flex-col items-start gap-1 mt-2";
          snowGear.innerHTML = `
            <div class="flex justify-between w-full">
              <span class="text-2xl">ğŸŒ¨ï¸</span>
              <span class="text-[10px] font-bold text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded">í•„ìˆ˜</span>
            </div>
            <span class="font-bold text-slate-800">ìš°ì‚°/ë°©í•œí™”</span>
            <span class="text-[10px] text-slate-600 font-medium">ëˆˆì´ ì˜¤ê³  ìˆì–´ìš”</span>
          `;
          itemArea.appendChild(snowGear);
        }

        if (hasRequired) {
          noItem.classList.add("hidden");
        } else {
          noItem.classList.remove("hidden");
        }

        const weatherIcons = {
          clear: "â˜€ï¸",
          clouds: "â˜ï¸",
          rain: "â˜”",
          snow: "â„ï¸",
          fog: "ğŸŒ«ï¸",
        };
        document.getElementById("sampleIcon").textContent = weatherIcons[currentSettings.weather];

        // 1. Time Base
        base.className = "absolute inset-0 transition-all duration-1000 " + themes[currentSettings.time];

        // 2. Weather & Dust Visuals
        let w = weatherOverlays[currentSettings.weather];
        overlay.className = "absolute inset-0 transition-all duration-1000 " + w.color;
        overlay.style.opacity = w.opacity;

        let hazeOpacity = w.haze || 0;
        let filterString = w.blur ? `blur(${w.blur}px)` : "none";

        const maxDust = Math.max(currentSettings.pm10, currentSettings.pm25);
        if (maxDust >= 3) {
          const intensity = maxDust === 4 ? 1 : 0.6;
          hazeOpacity = Math.max(hazeOpacity, intensity * 0.45);
          filterString = (filterString !== "none" ? filterString + " " : "") + `sepia(${intensity * 0.6}) contrast(0.9) blur(${intensity * 2}px)`;
          if (maxDust >= 4) {
            overlay.className = "absolute inset-0 transition-all duration-1000 bg-yellow-900";
            overlay.style.opacity = Math.max(w.opacity, 0.25);
          }
        }
        haze.style.opacity = hazeOpacity;
        haze.style.backdropFilter = filterString;
        haze.style.webkitBackdropFilter = filterString;

        // 4. Update Detailed Mockup
        const directionsList = ["ë¶", "ë¶ë™", "ë™", "ë‚¨ë™", "ë‚¨", "ë‚¨ì„œ", "ì„œ", "ë¶ì„œ"];
        const windIdx = Math.floor(((currentSettings.vec + 22.5) % 360) / 45);
        document.getElementById("detailHumidity").textContent = (40 + Math.random() * 20).toFixed(0) + "%";
        document.getElementById("detailWind").textContent = currentSettings.wsd + "m/s";
        document.getElementById("detailWindDir").textContent = directionsList[windIdx] + "í’";
        document.getElementById("detailPop").textContent = (currentSettings.rn1 > 0 ? 80 : 0) + "%";

        // Feels Like Update
        // Feels Like Update
        if (currentSettings.yFeelsDiff !== undefined) {
          document.getElementById("yFeelsDiffVal").textContent = (currentSettings.yFeelsDiff > 0 ? "+" : "") + currentSettings.yFeelsDiff + "Â°C";
        }
        if (currentSettings.tFeelsDiff !== undefined) {
          document.getElementById("tFeelsDiffVal").textContent = (currentSettings.tFeelsDiff > 0 ? "+" : "") + currentSettings.tFeelsDiff + "Â°C";
        }
        document.getElementById("sampleFeelsLike").textContent = `ì²´ê° ${(24 + Math.random() * 4 + currentSettings.yFeelsDiff).toFixed(0)}Â°`;

        // Mood Message Logic (Random Selection)
        const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
        const getMood = () => {
          if (maxDust >= 3) return pick(moodMessages.dust);
          if (currentSettings.weather === "rain" || currentSettings.rn1 > 0) return pick(moodMessages.rain);
          if (currentSettings.weather === "snow") return pick(moodMessages.snow);
          if (currentSettings.weather === "clear") return pick(moodMessages.clear);
          return pick(moodMessages.default);
        };
        document.getElementById("moodText").textContent = getMood();

        // 3. Wind Physics
        const rad = (currentSettings.vec * Math.PI) / 180;
        const horizontalWind = -Math.sin(rad) * currentSettings.wsd;
        const windTilt = Math.max(-30, Math.min(30, horizontalWind * 5));
        mascot.style.transform = `translateX(${windTilt}px)`;

        // 4. Particles
        particles.innerHTML = "";
        let countFactor = 1;
        if (currentSettings.rn1 > 0) {
          if (currentSettings.rn1 < 1) countFactor = 1.5;
          else if (currentSettings.rn1 < 5) countFactor = 2.5;
          else countFactor = 4;
        }

        if (currentSettings.weather === "rain") {
          const count = Math.floor(25 * countFactor);
          for (let i = 0; i < count; i++) {
            const drop = document.createElement("div");
            drop.className = "rain-drop";
            drop.style.width = Math.random() * 1.5 + 1 + "px";
            drop.style.height = Math.random() * 10 + 6 + "px";
            drop.style.left = Math.random() * 130 - 15 + "%";
            drop.style.top = "-" + Math.random() * 50 + "px";
            drop.style.transform = `rotate(${windTilt}deg) skewX(${windTilt}deg)`;
            drop.style.animationDuration = (Math.random() * 0.5 + 1.2) / (1 + currentSettings.wsd * 0.2) + "s";
            drop.style.animationDelay = `-${Math.random() * 2}s`;
            particles.appendChild(drop);
          }
        } else if (currentSettings.weather === "snow") {
          const count = Math.floor(15 * countFactor);
          for (let i = 0; i < count; i++) {
            const snow = document.createElement("div");
            snow.className = "snow-particle";
            snow.style.width = Math.random() * 8 + 4 + "px";
            snow.style.height = snow.style.width;
            snow.style.left = Math.random() * 130 - 15 + "%";
            snow.style.transform = `rotate(${windTilt}deg) skewX(${windTilt}deg)`;
            snow.style.animationDuration = Math.random() * 5 + 5 / (1 + currentSettings.wsd * 0.1) + "s";
            snow.style.animationDelay = `-${Math.random() * 10}s`;
            particles.appendChild(snow);
          }
        }

        // 5. Thunder Logic
        clearTimeout(thunderTimer);
        if (currentSettings.thunder) {
          const triggerThunder = () => {
            const layer = document.createElement("div");
            layer.className = "thunder-layer";
            document.getElementById("simThunder").appendChild(layer);
            setTimeout(() => layer.remove(), 300);
            thunderTimer = setTimeout(triggerThunder, 3000 + Math.random() * 7000);
          };
          thunderTimer = setTimeout(triggerThunder, 3000);
        }

        // 6. Text Contrast
        if (currentSettings.textColorOverride === "auto") {
          const isDark = ["night", "sunset"].includes(currentSettings.time) || currentSettings.weather === "rain" || currentSettings.weather === "clouds";
          preview.classList.toggle("text-white", isDark);
          preview.classList.toggle("text-slate-900", !isDark);
          preview.style.color = "";
        } else if (currentSettings.textColorOverride === "custom") {
          preview.classList.remove("text-white", "text-slate-900");
          preview.style.color = currentSettings.customColor;
        } else {
          const isWhite = currentSettings.textColorOverride === "white";
          preview.classList.toggle("text-white", isWhite);
          preview.classList.toggle("text-slate-900", !isWhite);
          preview.style.color = "";
        }

        // Labels
        document.getElementById("wsdVal").textContent = currentSettings.wsd + " m/s";
        const directions = ["ë¶", "ë¶ë™", "ë™", "ë‚¨ë™", "ë‚¨", "ë‚¨ì„œ", "ì„œ", "ë¶ì„œ"];
        const idx = Math.floor(((currentSettings.vec + 22.5) % 360) / 45);
        document.getElementById("vecVal").textContent = directions[idx] + "í’ (" + currentSettings.vec + "Â°)";
        document.getElementById("rn1Val").textContent = currentSettings.rn1 + " mm";
      }

      function setTextColor(mode) {
        currentSettings.textColorOverride = mode;
        if (mode === "custom") {
          currentSettings.customColor = document.getElementById("customColor").value;
          document.getElementById("customHex").value = currentSettings.customColor.toUpperCase();
        }
        document.querySelectorAll(".text-btn").forEach((btn) => {
          const isActive = btn.dataset.color === mode;
          btn.className = `text-btn flex-1 p-2 text-xs rounded-lg border transition-all ${isActive ? "bg-blue-600 text-white border-blue-600 shadow-md" : "bg-white border-slate-200 text-slate-700"}`;
        });
        updateSimulator();
      }

      function handleHexInput(val) {
        if (/^#[0-9A-F]{6}$/i.test(val)) {
          document.getElementById("customColor").value = val;
          setTextColor("custom");
        }
      }

      function applyPreset(name) {
        const presets = {
          dustStorm: {
            time: "afternoon",
            weather: "fog",
            pm10: 4,
            pm25: 3,
            yTempDiff: 1,
            yFeelsDiff: 2,
            tTempDiff: -2,
            tFeelsDiff: -3,
          },
          heatwave: {
            time: "noon",
            weather: "clear",
            pm10: 2,
            pm25: 2,
            yTempDiff: 3,
            yFeelsDiff: 4,
            tTempDiff: 5,
            tFeelsDiff: 7,
          },
          coldSnap: {
            time: "dawn",
            weather: "clear",
            pm10: 1,
            pm25: 1,
            yTempDiff: -5,
            yFeelsDiff: -8,
            tTempDiff: -1,
            tFeelsDiff: -2,
          },
          perfectDay: {
            time: "morning",
            weather: "clear",
            pm10: 1,
            pm25: 1,
            yTempDiff: 0,
            yFeelsDiff: 0,
            tTempDiff: 0,
            tFeelsDiff: 0,
          },
        };

        const config = presets[name];
        if (!config) return;

        Object.assign(currentSettings, config);

        document.getElementById("timeSelect").value = config.time;
        document.getElementById("weatherSelect").value = config.weather;
        document.getElementById("pm10Range").value = config.pm10;
        document.getElementById("pm25Range").value = config.pm25;
        document.getElementById("yTempDiffRange").value = config.yTempDiff;
        document.getElementById("yFeelsDiffRange").value = config.yFeelsDiff;
        document.getElementById("tTempDiffRange").value = config.tTempDiff;
        document.getElementById("tFeelsDiffRange").value = config.tFeelsDiff;

        updateSimulator();
      }

      // Listeners
      document.getElementById("timeSelect").addEventListener("change", (e) => {
        currentSettings.time = e.target.value;
        updateSimulator();
      });
      document.getElementById("weatherSelect").addEventListener("change", (e) => {
        currentSettings.weather = e.target.value;
        updateSimulator();
      });
      document.getElementById("wsdRange").addEventListener("input", (e) => {
        currentSettings.wsd = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("vecRange").addEventListener("input", (e) => {
        currentSettings.vec = parseInt(e.target.value);
        updateSimulator();
      });
      document.getElementById("rn1Range").addEventListener("input", (e) => {
        currentSettings.rn1 = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("pm10Range").addEventListener("input", (e) => {
        currentSettings.pm10 = parseInt(e.target.value);
        updateSimulator();
      });
      document.getElementById("pm25Range").addEventListener("input", (e) => {
        currentSettings.pm25 = parseInt(e.target.value);
        updateSimulator();
      });
      document.getElementById("yTempDiffRange").addEventListener("input", (e) => {
        currentSettings.yTempDiff = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("yFeelsDiffRange").addEventListener("input", (e) => {
        currentSettings.yFeelsDiff = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("tTempDiffRange").addEventListener("input", (e) => {
        currentSettings.tTempDiff = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("tFeelsDiffRange").addEventListener("input", (e) => {
        currentSettings.tFeelsDiff = parseFloat(e.target.value);
        updateSimulator();
      });
      document.getElementById("thunderToggle").addEventListener("change", (e) => {
        currentSettings.thunder = e.target.checked;
        updateSimulator();
      });

      // ==========================================
      // Preview Data Definition & Renderer
      // ==========================================

      const previewOutfitCases = [
        {
          category: "1ï¸âƒ£ íŠ¹ìˆ˜ ê¸°ìƒ (Special)",
          cases: [
            {
              condition: "ğŸ”¥ í­ì—¼ (33Â°C ì´ìƒ)",
              data: {
                summary: "í•œì—¬ë¦„ì´ì—ìš”. ìµœëŒ€í•œ ì‹œì›í•˜ê²Œ ì…ëŠ” ê²Œ ìµœê³ ì˜ˆìš” ğŸ¥µ",
                emoji: "ğŸ¥µ",
                color: "bg-red-100 text-red-700 border-red-200",
                items: [
                  { name: "ë¯¼ì†Œë§¤", icon: "ğŸ½" },
                  { name: "ë°˜íŒ”", icon: "ğŸ‘•" },
                  { name: "ë°˜ë°”ì§€", icon: "ğŸ©³" },
                  { name: "ë¦°ë„¨ ì˜·", icon: "ğŸ‘š" },
                ],
              },
            },
            {
              condition: "â„ï¸ í•œíŒŒ (-10Â°C ì´í•˜)",
              data: {
                summary: "ì¹¼ë°”ëŒì´ ë§¤ì„œì›Œìš”. ì™„ì „ ë¬´ì¥í•˜ì„¸ìš” ğŸ¥¶",
                emoji: "ğŸ¥¶",
                color: "bg-slate-200 text-slate-700 border-slate-300",
                items: [
                  { name: "íˆíŠ¸í…", icon: "â™¨ï¸" },
                  { name: "ë‹ˆíŠ¸/ë§¨íˆ¬ë§¨", icon: "ğŸ‘•" },
                  { name: "ê¸°ëª¨ë°”ì§€", icon: "ğŸ‘–" },
                  { name: "íŒ¨ë”©", icon: "ğŸ§¥" },
                  { name: "ë‘êº¼ìš´ ì½”íŠ¸", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "ğŸŒ§ï¸ í­ìš° (ì‹œê°„ë‹¹ 5mm ì´ìƒ)",
              data: {
                summary: "ë¹„ê°€ ë§ì´ ì™€ìš”. ì –ì§€ ì•Šê²Œ ì¡°ì‹¬í•˜ì„¸ìš” â˜”",
                emoji: "â›ˆï¸",
                color: "bg-slate-300 text-slate-800 border-slate-400",
                items: [
                  { name: "ê¸´íŒ” ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ë‘êº¼ìš´ í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "ë ˆì¸ì½”íŠ¸", icon: "ğŸ§¥" },
                  { name: "ë°©ìˆ˜ ì•„ìš°í„°", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "â„ï¸ í­ì„¤ (ëˆˆ + ì‹œê°„ë‹¹ 5mm ì´ìƒ)",
              data: {
                summary: "ëˆˆì´ ë§ì´ ì™€ìš”. ë°©ìˆ˜ì™€ ë³´ì˜¨ì— ì‹ ê²½ ì“°ì„¸ìš” â„ï¸",
                emoji: "â„ï¸",
                color: "bg-slate-300 text-slate-800 border-slate-400",
                items: [
                  { name: "ê¸´íŒ” ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ë‘êº¼ìš´ í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "ë ˆì¸ì½”íŠ¸", icon: "ğŸ§¥" },
                  { name: "ë°©ìˆ˜ ì•„ìš°í„°", icon: "ğŸ§¥" },
                ],
              },
            },
          ],
        },
        {
          category: "2ï¸âƒ£ ì²´ê° ë³´ì • (Correction)",
          cases: [
            {
              condition: "ğŸŒ¬ï¸ ê°•í’ (9m/s ì´ìƒ)",
              data: {
                summary: "ë°”ëŒ ë•Œë¬¸ì— ë” ì¶¥ê²Œ ëŠê»´ì ¸ìš” ğŸŒ¬ï¸",
                emoji: "ğŸŒ¬ï¸",
                color: "bg-blue-100 text-blue-700 border-blue-200",
                items: [
                  { name: "ê¸´íŒ” ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ë‹ˆíŠ¸/ë§¨íˆ¬ë§¨", icon: "ğŸ‘•" },
                  { name: "ë°”ëŒë§‰ì´", icon: "ğŸ§¥" },
                  { name: "íŠ¸ë Œì¹˜ì½”íŠ¸", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "ğŸŒ¡ï¸ ì¼êµì°¨ í¼ (10Â°C ì´ìƒ)",
              data: {
                summary: "ì•„ì¹¨ì €ë…ìœ¼ë¡œ ê¸°ì˜¨ ì°¨ê°€ ì»¤ìš” ğŸŒ¡ï¸ ë ˆì´ì–´ë“œ ë£© ì¶”ì²œ!",
                emoji: "ğŸŒ¡ï¸",
                color: "bg-purple-50 text-purple-600 border-purple-100",
                items: [
                  { name: "ê¸´íŒ” ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ì–‡ì€ ë‹ˆíŠ¸/ì…”ì¸ ", icon: "ğŸ‘”" },
                  { name: "ê°€ë””ê±´", icon: "ğŸ§¥" },
                  { name: "ì–‡ì€ ìì¼“", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "â˜” ë¹„ (ì¼ë°˜)",
              data: {
                summary: "ë¹„ ë•Œë¬¸ì— ë” ì„œëŠ˜í•˜ê²Œ ëŠê»´ì ¸ìš” â˜”",
                emoji: "â˜”",
                color: "bg-slate-200 text-blue-800 border-blue-300",
                items: [
                  { name: "ê¸´íŒ” ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ì–‡ì€ ë‹ˆíŠ¸/ì…”ì¸ ", icon: "ğŸ‘”" },
                  { name: "í¸í•œ í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "ë ˆì¸ ì¬í‚·", icon: "ğŸ§¥" },
                  { name: "ë°©ìˆ˜ ë°”ëŒë§‰ì´", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "â„ï¸ ëˆˆ (ì¼ë°˜)",
              data: {
                summary: "ëˆˆ ì˜¤ëŠ” ë‚ ì´ì—ìš” â„ï¸",
                emoji: "â„ï¸",
                color: "bg-white text-slate-600 border-slate-200 shadow-sm",
                items: [
                  { name: "ë‹ˆíŠ¸/ë‘êº¼ìš´ ìƒì˜", icon: "ğŸ‘•" },
                  { name: "ê¸°ëª¨/ë‘êº¼ìš´ í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "íŒ¨ë”©", icon: "ğŸ§¥" },
                  { name: "ë‘êº¼ìš´ ì½”íŠ¸", icon: "ğŸ§¥" },
                ],
              },
            },
          ],
        },
        {
          category: "3ï¸âƒ£ ê¸°ë³¸ ê¸°ì˜¨ (Basic Temp)",
          cases: [
            {
              condition: "ğŸ¥µ ë§¤ìš° ë”ì›€ (28Â°C ì´ìƒ)",
              data: {
                summary: "ê°€ë§Œíˆ ìˆì–´ë„ ë”ìš´ ë‚ ì´ì—ìš”. ìµœëŒ€í•œ ê°€ë³ê²Œ ğŸ‘•",
                emoji: "ğŸ¥µ",
                color: "bg-red-50 text-red-600 border-red-100",
                items: [
                  { name: "ë°˜íŒ”/ë¯¼ì†Œë§¤", icon: "ğŸ½" },
                  { name: "ë°˜ë°”ì§€", icon: "ğŸ©³" },
                  { name: "ì–‡ì€ ì†Œì¬", icon: "ğŸ‘š" },
                ],
              },
            },
            {
              condition: "ğŸ˜ ë¥ì§€ë§Œ í™œë™ ê°€ëŠ¥ (23~27Â°C)",
              data: {
                summary: "ì¡°ê¸ˆ ë¥ì§€ë§Œ ì–‡ì€ ì˜·ì´ë©´ ê´œì°®ì•„ìš” ğŸ˜",
                emoji: "ğŸ˜",
                color: "bg-orange-50 text-orange-600 border-orange-100",
                items: [
                  { name: "ë°˜íŒ”", icon: "ğŸ‘•" },
                  { name: "ì–‡ì€ ì…”ì¸ ", icon: "ğŸ‘”" },
                  { name: "ë©´ë°”ì§€/ë°˜ë°”ì§€", icon: "ğŸ©³" },
                  { name: "ì–‡ì€ ì…”ì¸ ", icon: "ğŸ‘”" },
                ],
              },
            },
            {
              condition: "ğŸ˜Š ì¾Œì  (18~22Â°C)",
              data: {
                summary: "í™œë™í•˜ê¸° ë”± ì¢‹ì€ ë‚ ì”¨ì˜ˆìš” ğŸ˜Š",
                emoji: "ğŸ˜Š",
                color: "bg-green-50 text-green-600 border-green-100",
                items: [
                  { name: "ê¸´íŒ”í‹°", icon: "ğŸ‘•" },
                  { name: "ì–‡ì€ ë‹ˆíŠ¸", icon: "ğŸ§¶" },
                  { name: "ì²­ë°”ì§€/ë©´ë°”ì§€", icon: "ğŸ‘–" },
                  { name: "ì–‡ì€ ê°€ë””ê±´", icon: "ğŸ§¥" },
                  { name: "ì–‡ì€ ìì¼“", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "ğŸ‚ ì‚´ì§ ì„œëŠ˜ (15~17Â°C)",
              data: {
                summary: "ì‚´ì§ ì„œëŠ˜í•  ìˆ˜ ìˆì–´ìš” ğŸ‚",
                emoji: "ğŸ‚",
                color: "bg-teal-50 text-teal-600 border-teal-100",
                items: [
                  { name: "ê¸´íŒ”", icon: "ğŸ‘•" },
                  { name: "ë§¨íˆ¬ë§¨/ë‹ˆíŠ¸", icon: "ğŸ§¶" },
                  { name: "ê°„ì ˆê¸° í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "ê°€ë””ê±´", icon: "ğŸ§¥" },
                  { name: "ì–‡ì€ ìì¼“", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "ğŸ§¥ ì¶”ì›€ (10~14Â°C)",
              data: {
                summary: "ì™¸íˆ¬ ì—†ì´ëŠ” ìŒ€ìŒ€í•´ìš”. ë”°ëœ»í•˜ê²Œ ì…ìœ¼ì„¸ìš” ğŸŒ¬ï¸",
                emoji: "ğŸ§¥",
                color: "bg-blue-50 text-blue-600 border-blue-100",
                items: [
                  { name: "ë‹ˆíŠ¸", icon: "ğŸ§¶" },
                  { name: "ë‘êº¼ìš´ ê¸´íŒ”", icon: "ğŸ‘•" },
                  { name: "ì¼ë°˜ í•˜ì˜", icon: "ğŸ‘–" },
                  { name: "ìì¼“", icon: "ğŸ§¥" },
                  { name: "ì½”íŠ¸", icon: "ğŸ§¥" },
                ],
              },
            },
            {
              condition: "ğŸ§£ ê²¨ìš¸/ë” ì¶”ì›€ (10Â°C ë¯¸ë§Œ)",
              data: {
                summary: "ë§ì´ ì¶”ì›Œìš”. ë³´ì˜¨ì— ì‹ ê²½ ì“°ì„¸ìš” ğŸ§£",
                emoji: "ğŸ§£",
                color: "bg-indigo-50 text-indigo-600 border-indigo-100",
                items: [
                  { name: "ë‘êº¼ìš´ ë‹ˆíŠ¸", icon: "ğŸ§¶" },
                  { name: "ê¸°ëª¨ ë°”ì§€", icon: "ğŸ‘–" },
                  { name: "íŒ¨ë”©", icon: "ğŸ§¥" },
                  { name: "ë‘êº¼ìš´ ì½”íŠ¸", icon: "ğŸ§¥" },
                  { name: "ëª©ë„ë¦¬", icon: "ğŸ§£" },
                ],
              },
            },
          ],
        },
      ];

      const previewItemCases = [
        { id: "rain", condition: "â˜” ë¹„ (ê°•ìˆ˜)", items: [{ id: "umbrella", name: "ìš°ì‚°", icon: "â˜”", reason: "ë¹„ê°€ ì˜¤ê³  ìˆì–´ìš”", type: "required" }] },
        {
          id: "snow",
          condition: "â„ï¸ ëˆˆ/í­ì„¤",
          items: [
            { id: "snow_umbrella", name: "ìš°ì‚°", icon: "ğŸŒ‚", reason: "ëˆˆì´ ì˜¤ê³  ìˆì–´ìš”", type: "required" },
            { id: "nonslip_shoes", name: "ë¯¸ë„ëŸ¼ ë°©ì§€ ì‹ ë°œ", icon: "ğŸ¥¾", reason: "ê¸¸ì´ ë¯¸ë„ëŸ¬ì›Œìš”", type: "required" },
          ],
        },
        { id: "cold", condition: "â„ï¸ í•œíŒŒ (-10Â°C)", items: [{ id: "warm_gear", name: "ì¥ê°‘/ëª©ë„ë¦¬", icon: "ğŸ§£", reason: "í•œíŒŒì£¼ì˜! ì‚´ì´ íŠ¸ì§€ ì•Šê²Œ ê°ì‹¸ì„¸ìš”", type: "required" }] },
        { id: "heat", condition: "ğŸ”¥ í­ì—¼ (33Â°C)", items: [{ id: "water", name: "ë¬¼ë³‘", icon: "ğŸ’§", reason: "ìˆ˜ë¶„ ë³´ì¶©ì´ í•„ìˆ˜ì˜ˆìš”", type: "required" }] },
        { id: "dust", condition: "ğŸŒ«ï¸ ë¯¸ì„¸ë¨¼ì§€ ë‚˜ì¨", items: [{ id: "mask", name: "ë§ˆìŠ¤í¬", icon: "ğŸ˜·", reason: "ë¯¸ì„¸ë¨¼ì§€ê°€ ë‚˜ë¹ ìš”", type: "required" }] },
        { id: "uv", condition: "â˜€ï¸ ìì™¸ì„  ë†’ìŒ (Option)", items: [{ id: "uv_care", name: "ì„ ê¸€ë¼ìŠ¤/ì„ í¬ë¦¼", icon: "ğŸ•¶ï¸", reason: "ìì™¸ì„  ì§€ìˆ˜ê°€ ë†’ì•„ìš”", type: "optional" }] },
        { id: "diff", condition: "ğŸŒ¡ï¸ ì¼êµì°¨ í¼ (Option)", items: [{ id: "cardigan", name: "ì—¬ë²Œ ê²‰ì˜·", icon: "ğŸ§¥", reason: "ì¼êµì°¨ê°€ ì»¤ì„œ ì²´ì˜¨ ì¡°ì ˆì´ í•„ìš”í•´ìš”", type: "optional" }] },
        { id: "wind", condition: "ğŸŒ¬ï¸ ë°”ëŒ ê°•í•¨ (Option)", items: [{ id: "wind_scarf", name: "ìŠ¤ì¹´í”„/ë°”ëŒë§‰ì´", icon: "ğŸ§£", reason: "ë°”ëŒì´ ì°¨ê°‘ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”", type: "optional" }] },
        { id: "weak_rain", condition: "ğŸŒ¦ï¸ ì•½í•œ ë¹„ ì˜ˆë³´ (Option)", items: [{ id: "folding_umbrella", name: "ì ‘ì´ì‹ ìš°ì‚°", icon: "ğŸŒ‚", reason: "í˜¹ì‹œ ëª¨ë¥´ë‹ˆ ì±™ê¸°ë©´ ì¢‹ì•„ìš”", type: "optional" }] },
        { id: "weak_snow", condition: "ğŸŒ¨ï¸ ì•½í•œ ëˆˆ ì˜ˆë³´ (Option)", items: [{ id: "hotpack", name: "í•«íŒ©", icon: "ğŸ”¥", reason: "ëˆˆë°œì´ ë‚ ë ¤ìš”. ì† ì‹œë ¤ìš¸ ìˆ˜ ìˆì–´ìš”", type: "optional" }] },
      ];

      const previewMoodMessages = {
        "íŠ¹ìˆ˜(í­ì—¼/í•œíŒŒ)": ["ì‹œì›í•œ ë°”ëŒ ê°™ì€ ê¸°ë¶„ ì¢‹ì€ ì†Œì‹ì„ ê¸°ëŒ€í•´ìš” ğŸŒŠ", "ì˜¤ëŠ˜ì€ì˜ ëª©í‘œëŠ” â€˜ë²„í‹°ê¸°â€™ë„ ì„±ê³µì´ì—ìš” â„ï¸", "ë”°ëœ»í•œ ê²ƒ í•˜ë‚˜ì¯¤ì€ ê¼­ ì±™ê²¨ë„ ë˜ëŠ” ë‚ ì´ì—ìš” â˜•"],
        ë¯¸ì„¸ë¨¼ì§€: ["ë§ˆìŒë§Œì€ ëˆ„êµ¬ë³´ë‹¤ ë§‘ê³  í™”ì°½í•œ í•˜ë£¨ ë˜ì„¸ìš” ğŸŒ¿", "ì˜¤ëŠ˜ì€ ë°–ë³´ë‹¤ ë‚˜ë¥¼ ë¨¼ì € ì±™ê¸°ëŠ” ë‚ ì´ì—ìš” ğŸ˜·"],
        "ë¹„/ëˆˆ": ["í† ë‹¥í† ë‹¥ ë¹—ì†Œë¦¬ì— ë§ˆìŒê¹Œì§€ ì°¨ë¶„í•´ì§€ë„¤ìš” ğŸŒ§ï¸", "í•˜ì–€ ëˆˆì²˜ëŸ¼ ì„¤ë ˆëŠ” ì¼ì´ ìƒê¸¸ ê²ƒ ê°™ì•„ìš” â„ï¸"],
        ë§‘ìŒ: ["ëˆˆë¶€ì‹  í–‡ì‚´ë§Œí¼ ë‹¹ì‹ ì˜ ì˜¤ëŠ˜ì´ ë°˜ì§ì´ê¸¸ âœ¨", "í•˜ëŠ˜ê¹Œì§€ ì‘ì›í•´ì£¼ëŠ” í•˜ë£¨ì˜ˆìš” ğŸŒˆ"],
        ê¸°ë³¸: ["í¬ê·¼í•œ êµ¬ë¦„ ì•„ë˜ ì ì‹œ ì‰¬ì–´ê°€ê¸° ì¢‹ì€ ë‚ ì´ì—ìš” â˜ï¸", "ì²œì²œíˆ ê°€ë„ ê´œì°®ì€ í•˜ë£¨ì˜ˆìš” â˜ï¸"],
      };

      // Helper Renderers
      const pOutfitContainer = document.getElementById("previewOutfitContainer");
      previewOutfitCases.forEach((group) => {
        const groupEl = document.createElement("div");
        groupEl.className = "space-y-6";
        groupEl.innerHTML = `<h3 class="text-lg font-bold text-slate-400 uppercase tracking-widest border-b border-slate-100 pb-2">${group.category}</h3>`;
        const list = document.createElement("div");
        list.className = "flex flex-col gap-6";
        group.cases.forEach((c) => {
          const card = document.createElement("div");
          card.className = "flex flex-col gap-2";
          const cardVisual = `
               <div class="p-4 rounded-[1rem] shadow-sm border ${c.data.color} bg-opacity-50 relative overflow-hidden transition-all hover:scale-[1.02] duration-300">
                  <div class="flex items-start gap-3">
                    <div class="w-10 h-10 flex items-center justify-center text-2xl bg-white/80 p-1 rounded-full shadow-sm flex-none backdrop-blur-sm">
                      ${c.data.emoji}
                    </div>
                    <div class="flex-1 min-w-0">
                       <h4 class="text-sm font-bold opacity-70 mb-1 flex justify-between items-center">
                          <span>${c.condition}</span>
                       </h4>
                       <p class="text-sm font-bold opacity-90 break-keep leading-snug mb-3">${c.data.summary}</p>
                    </div>
                  </div>
                  <div class="flex flex-wrap gap-2 pl-[3.25rem]">
                     ${c.data.items
                       .map(
                         (i) => `
                       <span class="bg-white/60 px-2.5 py-1.5 rounded-lg text-xs font-semibold shadow-sm flex items-center gap-1.5 backdrop-blur-sm">
                         <span class="text-sm">${i.icon}</span> ${i.name}
                       </span>
                     `,
                       )
                       .join("")}
                  </div>
               </div>`;
          card.innerHTML = cardVisual;
          list.appendChild(card);
        });
        groupEl.appendChild(list);
        pOutfitContainer.appendChild(groupEl);
      });

      const pItemContainer = document.getElementById("previewItemContainer");
      previewItemCases.forEach((c) => {
        const wrapper = document.createElement("div");
        wrapper.className = "bg-white p-5 rounded-2xl border border-slate-100 card-shadow flex flex-col gap-3";
        wrapper.innerHTML = `
            <div class="text-xs font-bold text-slate-400 uppercase mb-1">${c.condition}</div>
            <div class="flex-1 flex flex-col gap-2">
               ${c.items
                 .map((i) => {
                   const isReq = i.type === "required";
                   return `
                  <div class="p-3 rounded-xl border ${isReq ? "bg-red-50 border-red-200" : "bg-slate-50 border-slate-200"} flex flex-col gap-1 items-start relative">
                      <div class="absolute top-2 right-2">
                         ${isReq ? `<span class="bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded-full font-extrabold tracking-wide uppercase">MUST</span>` : `<span class="bg-slate-400 text-white text-[9px] px-1.5 py-0.5 rounded-full font-extrabold tracking-wide uppercase">OPTION</span>`}
                      </div>
                      <div class="flex items-center gap-2">
                         <span class="text-2xl">${i.icon}</span>
                         <span class="text-sm font-bold ${isReq ? "text-slate-800" : "text-slate-600"}">${i.name}</span>
                      </div>
                      <p class="text-[11px] font-medium leading-tight ${isReq ? "text-red-500" : "text-slate-500"}">${i.reason}</p>
                  </div>`;
                 })
                 .join("")}
            </div>`;
        pItemContainer.appendChild(wrapper);
      });

      const pMoodContainer = document.getElementById("previewMoodContainer");
      for (const [key, msgs] of Object.entries(previewMoodMessages)) {
        const mEl = document.createElement("div");
        mEl.innerHTML = `<h4 class="font-bold text-slate-700 mb-2 border-l-4 border-blue-400 pl-2">${key}</h4><ul class="list-disc list-inside text-slate-500 space-y-1 text-xs">${msgs.map((m) => `<li>${m}</li>`).join("")}</ul>`;
        pMoodContainer.appendChild(mEl);
      }

      updateSimulator();
    </script>
  </body>
</html>
